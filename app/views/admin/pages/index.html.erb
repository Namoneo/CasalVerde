<h2>Welcome to the admin panel!</h2>
<p>This is the admin panel.</p>
<p>Would be cool to have some stats here. Example: table with the newest resersvations.</p>

<% 

calendars = nil
open("https://calendar.google.com/calendar/ical/ashdeveloper510%40gmail.com/public/basic.ics") do |cal|
 calendars = Icalendar::Calendar.parse(cal) 
end

calendar = calendars.first

event = Icalendar::Event.new
event.dtstart = Icalendar::Values::Date.new('20170428')
event.dtend   = Icalendar::Values::Date.new('20170429')
event.summary = "A great event!"
calendar.add_event(event)

event2 = calendar.event  # This automatically adds the event to the calendar
event2.dtstart = Icalendar::Values::Date.new('20170328')
event2.dtend   = Icalendar::Values::Date.new('20170329')
event2.summary = "Another great event!"

calendar.events.each do |event| %>
  <p><%=event.summary%> starts at: <%=event.dtstart%> and ends at <%=event.dtend%></p>
  <% puts "#{event.summary} starts at: #{event.dtstart} and ends at #{event.dtend}" 
end  

cal_string = calendar.to_ical
puts cal_string

%>
<p><%=cal_string%></p>